<div *ngFor=" let data_node of data">
  <div class="notes-tree-container" fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="4">

    <div *ngIf=" !data_node.children || data_node.children.length == 0">
      <li fxLayout="column" fxLayoutAlign="center stretch" fxLayoutGap="8">
        <!-- use a disabled button to provide padding for tree leaf -->
        <div class="notes-tree-node" fxLayout="row" fxLayoutAlign="start center" (click)="getSelected(data_node)"
          [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == data_node.name}">
          <button mat-icon-button *ngIf="data_node.name != ''" class="notes-tree-leave"
            [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == data_node.name, 
                        'notes-tree-leave': !node_selected || node_selected.name != data_node.name}">
            <span>{{data_node.name}}</span>
          </button>
          <div *ngIf="data_node.name == ''" class="notes-tree-leave" 
            [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == data_node.name}">
            <input #note_name_input id="note_name_input" placeholder="Note Name" (keyup.Enter)="renameNode()" type="text"
              [(ngModel)]="new_node_name" class="notes-tree-node-name notes-tree-node-selected" />
          </div>
        </div>

      </li>
    </div>

    <!-- This is the tree node template for expandable nodes -->
    <div *ngIf=" data_node.children && data_node.children.length > 0">
      <li fxLayout="column" fxLayoutAlign="start stretch">
        <div class="notes-tree-node" fxLayout="row" fxLayoutAlign="start center">
          <button class="notes-tree-button" (click)="getSelected(data_node)"
            [attr.aria-label]="'toggle ' + data_node.name"
            [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == data_node.name}">
            <mat-icon class="notes-tree-icon">
              {{data_node.selected ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
            <span>{{data_node.name}}</span>
          </button>

        </div>
        <ul [class.notes-tree-section-invisible]="!data_node.selected" class="notes-tree-parent">
          <app-notes-tree [data]="data_node.children"></app-notes-tree>
        </ul>
      </li>
    </div>


  </div>
</div>