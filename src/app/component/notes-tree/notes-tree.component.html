<div class="notes-tree-container" fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="4">

  <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="notes-tree-section">
    <!-- This is the tree node template for leaf nodes -->
    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="8">
      <li fxLayout="column" fxLayoutAlign="center stretch" fxLayoutGap="8">
        <!-- use a disabled button to provide padding for tree leaf -->
        <div class="notes-tree-node" fxLayout="row" fxLayoutAlign="start center" 
          (click)="getSelected(node)"  [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == node.name}">
          <button mat-icon-button  *ngIf="node.name != ''" class="notes-tree-leave" [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == node.name}">
            <span>{{node.name}}</span>
          </button>
          <mat-form-field appearance="outline" *ngIf="node.name == ''">
            <input matInput placeholder="Note Name" size="20" />
          </mat-form-field>
        </div>
        
      </li>
    </mat-tree-node>

    <!-- This is the tree node template for expandable nodes -->
    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
      <li  fxLayout="column" fxLayoutAlign="start stretch">
        <div class="notes-tree-node" fxLayout="row" fxLayoutAlign="start center" >
          <button  matTreeNodeToggle class="notes-tree-button" (click)="getSelected(node)"
            [attr.aria-label]="'toggle ' + node.name" [ngClass]="{'notes-tree-node-selected': node_selected && node_selected.name == node.name}" >
            <mat-icon class="notes-tree-icon" >
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
            <span>{{node.name}}</span>
          </button>
          
        </div>
        <ul [class.notes-tree-section-invisible]="!treeControl.isExpanded(node)">
          <ng-container matTreeNodeOutlet></ng-container>
        </ul>
      </li>
    </mat-nested-tree-node>

  </mat-tree>
</div>